jobs:
  build_video:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout (use same ref as dispatch)
        uses: actions/checkout@v4
        with:
          ref: ${{ github.ref }}

      - name: Debug listing
        run: |
          echo "PWD: $(pwd)"
          echo "Branch/Ref: ${{ github.ref }}"
          echo "CLIENT=${{ github.event.inputs.client }}"
          ls -la
          ls -la content_studio || true
          ls -la content_studio/assets || true
          ls -la "content_studio/assets/${{ github.event.inputs.client }}" || true
          ls -la "content_studio/assets/${{ github.event.inputs.client }}/images" || true

      - name: Validate client assets
        env:
          CLIENT: ${{ github.event.inputs.client }}
        run: |
          set -e
          test -f "content_studio/assets/${CLIENT}/config.json"
          echo "âœ… Found config for ${CLIENT}"
